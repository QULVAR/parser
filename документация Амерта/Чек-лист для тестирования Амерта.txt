{{TOC}}

===

## 0) Общие проверки
- [ ]  Приложение корректно запускается/открывается (веб/мобайл).
- [ ]  Ошибки отображаются понятным текстом, не “красным алертом без смысла”.
- [ ]  При сетевых ошибках показывается уведомление “внутренняя ошибка/попробуйте позже”.
- [ ]  После перезагрузки страницы/перезапуска приложения поведение корректное (сессия/профиль/корзина).

## 1) Авторизация (UC-AUTH-1)

**UI и валидации**
- [ ]  Экран входа: Логин, Пароль, кнопка “Войти” неактивна.
- [ ]  После ввода валидных данных кнопка становится активной.
- [ ]  Проверка формата логина (email):
	- [ ]  валидный → ок
	- [ ]  невалидный → ошибка/не активна “Войти”
**Вход**
- [ ]  Валидные учетные данные → создаётся сессия, переход в профиль, уведомление “успешный вход”.
- [ ]  Неверный пароль → “Неверный логин или пароль”.
- [ ]  Несуществующий логин → также “Неверный логин или пароль” (не раскрывает что именно неверно).
- [ ]  Ошибка соединения/сервер → “Внутренняя ошибка…”, вход не выполнен.
- [ ]  Поведение при повторном открытии приложения/обновлении страницы после входа (сессия сохраняется/нет — зафиксировать фактическое).

## 2) Личный кабинет (UC-MP-3)
- [ ]  На главной странице есть вкладка/кнопка “Личный кабинет”.
- [ ]  По нажатию открывается форма поверх главной:
	- [ ]  текст “Вы вошли как:”
	- [ ]  имя пользователя
	- [ ]  почта
	- [ ]  кнопка “Выход”
- [ ]  Нажатие вне формы закрывает форму, оставляя пользователя на главной.
- [ ]  “Выход” переводит на экран аутентификации.
- [ ]  Если пользователь — админ:
- [ ]  отображается админ-панель.

## 3) Админ-панель

### 3.1 Импорт каталога (UC-ADM-1)

- [ ]  В админке есть действие импорта каталога.
- [ ]  Загрузка корректного файла:
	- [ ]  файл обрабатывается
	- [ ]  каталог обновляется (для всех пользователей)
	- [ ]  админ видит уведомление об успехе
- [ ]  Некорректный формат файла → “Некорректный формат файла”.
- [ ]  Ошибка соединения/сервер → “Внутренняя ошибка…”, каталог не изменён.
- [ ]  После импорта пользователь на главной видит обновлённые позиции (проверка “как минимум один явный маркер изменения”).

### 3.2 Создание пользователя (UC-ADM-2)
- [ ]  В админке можно создать пользователя с пустыми полями.
- [ ]  Кнопка “Сохранить” неактивна до прохождения валидации.
- [ ]  Логин email валидируется.
- [ ]  Пароль минимум 8 символов.
- [ ]  Сохранение валидных данных → успех.
- [ ]  Дубликат логина → ошибка “Пользователь с таким логином уже зарегистрирован”.
- [ ]  Ошибка соединения/сервер → “Внутренняя ошибка…”.

### 3.3 Удаление пользователя (UC-ADM-3)
- [ ]  Удаление пользователя выполняется успешно → уведомление.
- [ ]  Ошибка соединения/сервер → “Внутренняя ошибка…”.
- [ ]  Нельзя удалить “несуществующего” пользователя (если возможно воспроизвести) → корректная ошибка.

### 3.4 Создание промокода (UC-ADM-4)
- [ ]  Форма содержит: промокод, размер в процентах, сохранить.
- [ ]  Валидация промокода:
	- [ ]  латинские буквы/цифры принимаются
	- [ ]  спецсимволы: принимаются
- [ ]  Валидация размера скидки:
	- [ ]  <100 и >0 проходит
	- [ ]  0, 100, отрицательные, дробные — ожидаемое поведение фиксируется
- [ ]  Дубликат промокода → “Промокод уже существует”.
- [ ]  Ошибка валидации → сообщение об ошибке, возврат к вводу.
- [ ]  Ошибка соединения/сервер → “Внутренняя ошибка…”.
 
### 3.5 Удаление промокода (UC-ADM-5)
- [ ]  Удаление существующего промокода → успех + уведомление.
- [ ]  Ошибка соединения/сервер → “Внутренняя ошибка…”.
- [ ]  После удаления промокод больше не применяется в корзине (см. раздел промокода).
 
### 3.6 Выход из панели (UC-ADM-6)
- [ ]  Нажатие вне панели переводит в личный кабинет (как в ТЗ).
- [ ]  После “выхода из панели” админ-функции недоступны из ЛК/главной.

## 4) Главная страница: каталог, поиск, корзина-иконка

### 4.1 Шапка и элементы (из НФТ к UC-MP-1)
- [ ]  В шапке есть: Личный кабинет, логотип/переход на главную, корзина.
- [ ]  Поисковая строка отображается.
### 4.2 Список позиций и группировка (UC-MP-1)
- [ ]  На главной отображается сгруппированный список позиций по категориям.
- [ ]  Раскрытие группы показывает позиции и тарифы (суточный, недельный, Чт→Пн, Пт→Пн) — наличие/отображение.
- [ ]  У каждой позиции есть тумблер/кнопка добавления в корзину.
### 4.3 Добавление/удаление из корзины (UC-MP-1)
- [ ]  Добавление позиции увеличивает счётчик корзины.
- [ ]  Повторное нажатие (тумблер) удаляет позицию, счётчик уменьшается.
- [ ]  Состояние тумблера сохраняется при закрытии/открытии группы.
### 4.4 Поиск (UC-MP-2)
- [ ]  Поиск фильтрует группы по названию.
- [ ]  Поиск фильтрует по позициям внутри групп (если позиция совпала — остаётся соответствующая группа).
- [ ]  Если совпадений нет → пустая страница/состояние “ничего не найдено” (зафиксировать фактическое).
- [ ]  Очистка строки поиска возвращает исходный список.
## 5) Корзина (UC-BT-1) + количество (UC-BT-4)
### 5.1 Открытие/закрытие
- [ ]  Нажатие “Корзина” открывает форму поверх главной.
- [ ]  Нажатие вне формы закрывает корзину, остаёмся на главной.
### 5.2 Состав формы
- [ ]  Есть календарь выбора дат.
- [ ]  Есть список товаров с возможностью менять количество (+/−).
- [ ]  Есть поле промокода.
- [ ]  Есть “общая стоимость аренды”.
- [ ]  Кнопка “Рассчитать” по умолчанию неактивна.
- [ ]  Кнопка экспорта по умолчанию неактивна.
### 5.3 Изменение количества (UC-BT-4)
- [ ]  Нажатие “+” увеличивает количество единиц.
- [ ]  Нажатие “−” уменьшает:
	- [ ]  если было >1 → уменьшает
	- [ ]  если было 1 → удаляет товар из корзины
- [ ]  Итоговая стоимость корректно пересчитывается после нажатия “Рассчитать” (если пересчёт не автоматический).
## 6) Календарь (UC-BT-3) и расчёт (UC-BT-1)
- [ ]  Открытие календаря показывает текущий месяц/год, отмечена текущая дата.
- [ ]  По умолчанию время начала/конца заполнено текущим временем (как в ТЗ).
- [ ]  Выбор первой даты → становится началом аренды.
- [ ]  Выбор второй даты → становится концом диапазона.
- [ ]  Можно ввести время начала и конца.
- [ ]  После закрытия календаря в корзине отображается выбранный диапазон.
- [ ]  После выбора диапазона кнопка “Рассчитать” становится активной.
- [ ]  Повторное открытие календаря показывает предыдущий диапазон.
- [ ]  Новый выбор дат + закрытие → “Рассчитать” пересчитывает сумму.
## 7) Промокод (UC-BT-2)
- [ ]  При наличии товара в корзине и выбранных дат можно ввести промокод.
- [ ]  При вводе валидного существующего промокода:
	- [ ]  система подтверждает промокод (фактическое UI-поведение)
	- [ ]  при нажатии “Рассчитать” стоимость уменьшается на процент
	- [ ]  выводится стоимость “с промокодом” и “без”
- [ ]  Промокод не найден:
	- [ ]  показывается ошибка
	- [ ]  при “Рассчитать” стоимость считается без скидки
- [ ]  После удаления промокода админом (UC-ADM-5) этот промокод больше не применяется.
## 8) Экспорт сметы (UC-EXP-1)
- [ ]  После успешного расчёта кнопка “Экспорт” становится активной.
- [ ]  Нажатие “Экспорт” формирует файл.
- [ ]  Файл скачивается/сохраняется пользователю.
- [ ]  Экспорт без выполненного “Рассчитать” невозможен (кнопка неактивна).
- [ ]  Повторный экспорт после изменения дат/количества создаёт файл с обновлёнными данными.
## 9) Права доступа и роли
- [ ]  Неавторизованный пользователь не видит/не открывает главную и корзину (редирект на вход).
- [ ]  Неадмин не имеет доступа к админ-панели.
- [ ]  Админ имеет доступ к операциям импорта/пользователей/промокодов.