@startuml
title Диаграмма последовательности: Импорт данных каталога (Администратор)
actor Администратор as Admin
participant "UI (МП)" as UI
participant "Файловый сервис" as FileService
participant "Сервис каталога" as CatalogService
participant "База данных" as DB

Admin -> UI: Нажимает кнопку импорта каталога
UI -> Admin: Открывает диалог выбора файла

Admin -> UI: Выбирает и загружает файл
UI -> FileService: Передаёт файл для обработки

FileService -> FileService: Проверяет формат и структуру файла
alt Некорректный формат файла (ERR-05)
    FileService -> UI: Возвращает ошибку "Некорректный формат файла"
    UI -> Admin: Отображает сообщение об ошибке
    UI -> UI: Данные каталога не изменяются
else Формат корректен
    FileService -> CatalogService: Передаёт данные для импорта
    CatalogService -> DB: Запрос на сохранение нового каталога
    
    alt Ошибка сервера (ERR-01)
        DB -> CatalogService: Возвращает ошибку соединения/сервера
        CatalogService -> UI: "Внутренняя ошибка сервиса. Попробуйте позже"
        UI -> Admin: Отображает сообщение об ошибке
        UI -> UI: Данные каталога не изменяются
    else Успешное сохранение
        DB -> CatalogService: Подтверждение успешного сохранения
        CatalogService -> UI: Успешный ответ об обновлении
        UI -> Admin: Отображает уведомление об успешном обновлении каталога
    end
end

@enduml